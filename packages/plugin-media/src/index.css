:host {
  --et-media-src-failed-background: no-repeat center
    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3.33335 14.6667L12.6667 14.6667C13.0349 14.6667 13.3334 14.3682 13.3334 14L13.3334 4.66668L10 4.66668L10 1.33334L3.33335 1.33334C2.96516 1.33334 2.66669 1.63182 2.66669 2.00001L2.66669 14C2.66669 14.3682 2.96516 14.6667 3.33335 14.6667Z" stroke="currentColor" stroke-width="1.32" stroke-linejoin="round" stroke-linecap="round" ></path><path stroke="currentColor" stroke-width="1.32" stroke-linejoin="round" stroke-linecap="round"  d="M10 1.33334L13.3333 4.66668"></path><path stroke="currentColor" stroke-width="1.32" stroke-linejoin="round" stroke-linecap="round"  d="M6 7.33334L10 11.3333"></path><path stroke="currentColor" stroke-width="1.32" stroke-linejoin="round" stroke-linecap="round"  d="M10 7.33334L6 11.3333"></path></svg>');
}
.et-media {
  position: relative;
  /* 使用flex而不用block, 因为block时, 若高度不够line-height的整数倍 会存在类似padding-bottom的填充高度 */
  display: flex;
  /* 高度最大为半个视口 */
  max-height: 50vh;
  min-width: 32%;
  max-width: 90%;
  width: fit-content;
  margin: 4px auto;

  & > img,
  & > audio,
  & > video {
    min-width: 100%;
    margin: 0 auto;
    z-index: 1;
    /* 图片居中不拉伸显示 */
    object-fit: contain;
  }
  
  & > audio,
  & > video {
    min-width: 256px;
  }

  /* 默认视频宽高比 */
  --et-video_h_w_ratio: 0.5625;
  & > video {
    /* video最大宽度根据宽高比与最大高度计算, 避免宽度不够时出现左右渐变背景 */
    max-width: calc(50vh / var(--et-video_h_w_ratio));
  }

  /* 无 src (延迟初始化的资源) */
  &:has(> img:not([src]), > audio:not([src]), > video:not([src])) {
    & * {
      display: none;
    }
    &::after {
      display: none !important;
    }
    border: 1px solid var(--et-color-border-1);
    border-radius: 4px;
    padding: 8px;

    &:has(> img)::before {
      content: 'image loading...';
    }
    &:has(> audio)::before {
      content: 'audio loading...';
    }
    &:has(> video)::before {
      content: 'video loading...';
    }
  }
}

/* dialog */
.et-media__upload-area {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 78%;
  height: 68%;
  margin: auto;
  border: 1px dashed var(--et-color-text-disabled);
  border-radius: inherit;
  color: var(--et-color-text-disabled);
  transition: color 0.2s ease-in-out;

  cursor: pointer;

  &:hover {
    border-color: var(--et-color-text);
    color: var(--et-color-text);
  }
}
